(function(f,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(f=typeof globalThis<"u"?globalThis:f||self,u(f["@scalar/snippetz-plugin-node-fetch"]={}))})(this,function(f){"use strict";function u(i){return i.reduce((t,e)=>(t[e.name]=e.value,t),{})}function l(i){return/\s|-/.test(i)}function c(i,t=0){let e=[],h=" ".repeat(t),r=" ".repeat(t+2);for(const[d,o]of Object.entries(i)){let a=l(d)?`'${d}'`:d;if(Array.isArray(o)){const s=o.map(n=>typeof n=="string"?`'${n}'`:n&&typeof n=="object"?c(n,t+2):n).join(`, ${r}`);e.push(`${r}${a}: [${s}]`)}else if(o&&typeof o=="object")e.push(`${r}${a}: ${c(o,t+2)}`);else if(typeof o=="string"){let s=`${o}`;if(o.startsWith("JSON.stringify")){const n=o.split(`
`);n.length>1&&(s=n.map((p,y)=>y===0?p:`${r}${p}`).join(`
`))}else s=`'${o}'`;e.push(`${r}${a}: ${s}`)}else e.push(`${r}${a}: ${o}`)}return`{
${e.join(`,
`)}
${h}}`}function $(i){var a,s;const t={method:"GET",...i};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},h=new URLSearchParams(t.queryString?u(t.queryString):void 0),r=h.size?`?${h.toString()}`:"";(a=t.headers)!=null&&a.length&&(e.headers={},t.headers.forEach(n=>{e.headers[n.name]=n.value})),(s=t.cookies)!=null&&s.length&&(e.headers=e.headers||{},t.cookies.forEach(n=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${n.name}=${n.value}`:`${n.name}=${n.value}`})),Object.keys(e).forEach(n=>{e[n]===void 0&&delete e[n]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${c(JSON.parse(e.body))})`));const d=Object.keys(e).length?`, ${c(e)}`:"";return{target:"node",client:"fetch",code:`fetch('${t.url}${r}'${d})`}}f.fetch=$,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
