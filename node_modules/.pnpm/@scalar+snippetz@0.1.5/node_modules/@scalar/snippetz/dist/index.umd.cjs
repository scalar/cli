(function(f,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(f=typeof globalThis<"u"?globalThis:f||self,u(f["@scalar/snippetz"]={}))})(this,function(f){"use strict";function u(s){return s.reduce((t,e)=>(t[e.name]=e.value,t),{})}function p(s){return/\s|-/.test(s)}function h(s,t=0){let e=[],r=" ".repeat(t),o=" ".repeat(t+2);for(const[c,i]of Object.entries(s)){let d=p(c)?`'${c}'`:c;if(Array.isArray(i)){const a=i.map(n=>typeof n=="string"?`'${n}'`:n&&typeof n=="object"?h(n,t+2):n).join(`, ${o}`);e.push(`${o}${d}: [${a}]`)}else if(i&&typeof i=="object")e.push(`${o}${d}: ${h(i,t+2)}`);else if(typeof i=="string"){let a=`${i}`;if(i.startsWith("JSON.stringify")){const n=i.split(`
`);n.length>1&&(a=n.map((l,S)=>S===0?l:`${o}${l}`).join(`
`))}else a=`'${i}'`;e.push(`${o}${d}: ${a}`)}else e.push(`${o}${d}: ${i}`)}return`{
${e.join(`,
`)}
${r}}`}function $(s){var d,a;const t={method:"GET",...s};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),o=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(n=>{e.headers[n.name]=n.value})),(a=t.cookies)!=null&&a.length&&(e.headers=e.headers||{},t.cookies.forEach(n=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${n.name}=${n.value}`:`${n.name}=${n.value}`})),Object.keys(e).forEach(n=>{e[n]===void 0&&delete e[n]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${h(JSON.parse(e.body))})`));const c=Object.keys(e).length?`, ${h(e)}`:"";return{target:"node",client:"undici",code:`import { request } from 'undici'

const { statusCode, body } = await request('${t.url}${o}'${c})`}}function g(s){var d,a;const t={method:"GET",...s};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),o=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(n=>{e.headers[n.name]=n.value})),(a=t.cookies)!=null&&a.length&&(e.headers=e.headers||{},t.cookies.forEach(n=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${n.name}=${n.value}`:`${n.name}=${n.value}`})),Object.keys(e).forEach(n=>{e[n]===void 0&&delete e[n]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${h(JSON.parse(e.body))})`));const c=Object.keys(e).length?`, ${h(e)}`:"";return{target:"node",client:"fetch",code:`fetch('${t.url}${o}'${c})`}}function m(s){var d,a;const t={method:"GET",...s};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),o=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(n=>{e.headers[n.name]=n.value})),(a=t.cookies)!=null&&a.length&&(e.headers=e.headers||{},t.cookies.forEach(n=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${n.name}=${n.value}`:`${n.name}=${n.value}`})),Object.keys(e).forEach(n=>{e[n]===void 0&&delete e[n]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${h(JSON.parse(e.body))})`));const c=Object.keys(e).length?`, ${h(e)}`:"";return{target:"js",client:"fetch",code:`fetch('${t.url}${o}'${c})`}}function y(){const s=[$,g,m];return{get(t,e,r){const o=this.findPlugin(t,e);if(o)return o(r)},print(t,e,r){var o;return(o=this.get(t,e,r))==null?void 0:o.code},targets(){return s.map(t=>t().target).filter((t,e,r)=>r.indexOf(t)===e)},clients(){return s.map(t=>t().client)},plugins(){return s.map(t=>{const e=t();return{target:e.target,client:e.client}})},findPlugin(t,e){return s.find(r=>{const o=r();return o.target===t&&o.client===e})},hasPlugin(t,e){return!!this.findPlugin(t,e)}}}f.snippetz=y,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
