{"version":3,"file":"getTimeToNextUpdateForUnit.test.js","names":["getTimeToNextUpdateForUnit","describe","it","expect","to","be","undefined","Date","now","should","equal","test","seconds","expected","addOneMs","round"],"sources":["../../source/steps/getTimeToNextUpdateForUnit.test.js"],"sourcesContent":["import getTimeToNextUpdateForUnit from './getTimeToNextUpdateForUnit.js'\r\n\r\ndescribe('getTimeToNextUpdateForUnit', () => {\r\n\tit('should return undefined for unknown units', () => {\r\n\t\texpect(getTimeToNextUpdateForUnit('now', 0, {})).to.be.undefined\r\n\t})\r\n\r\n\tit('should support Date argument', () => {\r\n\t\tgetTimeToNextUpdateForUnit('second', new Date(0), {\r\n\t\t\t// future: false,\r\n\t\t\tnow: 0\r\n\t\t}).should.equal(500)\r\n\t})\r\n\r\n\tit('should get time to next update for unit (future)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', seconds * 1000, {\r\n\t\t\t\t// future: true,\r\n\t\t\t\tnow: 0\r\n\t\t\t}).should.equal(expected * 1000 + (addOneMs ? 1 : 0))\r\n\t\t}\r\n\r\n\t\ttest(9, 0.5)\r\n\t\ttest(9.1, 0.6)\r\n\t\ttest(9.4, 0.9)\r\n\t\ttest(9.5, 0)\r\n\t\ttest(9.9, 0.4)\r\n\t\ttest(10, 0.5)\r\n\r\n\t\ttest(1.1, 0.6)\r\n\t\ttest(1, 0.5)\r\n\t\ttest(0.9, 0.4)\r\n\t\ttest(0.5, 0)\r\n\t\ttest(0.4, 0.4)\r\n\t\ttest(0, 0.5, false)\r\n\t})\r\n\r\n\tit('should get time to next update for unit (past)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', -1 * seconds * 1000, {\r\n\t\t\t\t// future: false,\r\n\t\t\t\tnow: 0\r\n\t\t\t}).should.equal(expected * 1000)\r\n\t\t}\r\n\r\n\t\ttest(10, 0.5)\r\n\t\ttest(9.9, 0.6)\r\n\t\ttest(9.5, 1)\r\n\t\ttest(9.4, 0.1)\r\n\t\ttest(9.1, 0.4)\r\n\t\ttest(9, 0.5)\r\n\r\n\t\ttest(0, 0.5, false)\r\n\t\ttest(0.5, 1, false)\r\n\t\ttest(0.9, 0.6, false)\r\n\t\ttest(1, 0.5, false)\r\n\t\ttest(1.1, 0.4, false)\r\n\t})\r\n\r\n\tit('should support \"floor\" rounding (future)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', seconds * 1000, {\r\n\t\t\t\t// future: true,\r\n\t\t\t\tnow: 0,\r\n\t\t\t\tround: 'floor'\r\n\t\t\t}).should.equal(expected * 1000 + (addOneMs ? 1 : 0))\r\n\t\t}\r\n\r\n\t\ttest(9, 0)\r\n\t\ttest(9.1, 0.1)\r\n\t\ttest(9.4, 0.4)\r\n\t\ttest(9.5, 0.5)\r\n\t\ttest(9.9, 0.9)\r\n\t\ttest(10, 0)\r\n\r\n\t\ttest(1.1, 0.1)\r\n\t\ttest(1, 0)\r\n\t\ttest(0.9, 0.9)\r\n\t\ttest(0.5, 0.5)\r\n\t\ttest(0.1, 0.1)\r\n\t\ttest(0, 1, false)\r\n\t})\r\n\r\n\tit('should support \"floor\" rounding (past)', () => {\r\n\t\tconst test = (seconds, expected) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', -1 * seconds * 1000, {\r\n\t\t\t\t// future: false,\r\n\t\t\t\tnow: 0,\r\n\t\t\t\tround: 'floor'\r\n\t\t\t}).should.equal(expected * 1000)\r\n\t\t}\r\n\r\n\t\ttest(10, 1)\r\n\t\ttest(9.9, 0.1)\r\n\t\ttest(9.5, 0.5)\r\n\t\ttest(9.4, 0.6)\r\n\t\ttest(9.1, 0.9)\r\n\t\ttest(9, 1)\r\n\r\n\t\ttest(0, 1)\r\n\t\ttest(0.5, 0.5)\r\n\t\ttest(0.9, 0.1)\r\n\t\ttest(1, 1)\r\n\t\ttest(1.1, 0.9)\r\n\t})\r\n})"],"mappings":"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"}