{"version":3,"file":"getTimeToNextUpdateForUnit.test.js","names":["describe","it","expect","getTimeToNextUpdateForUnit","to","be","undefined","Date","now","should","equal","test","seconds","expected","addOneMs","round"],"sources":["../../source/steps/getTimeToNextUpdateForUnit.test.js"],"sourcesContent":["import getTimeToNextUpdateForUnit from './getTimeToNextUpdateForUnit.js'\r\n\r\ndescribe('getTimeToNextUpdateForUnit', () => {\r\n\tit('should return undefined for unknown units', () => {\r\n\t\texpect(getTimeToNextUpdateForUnit('now', 0, {})).to.be.undefined\r\n\t})\r\n\r\n\tit('should support Date argument', () => {\r\n\t\tgetTimeToNextUpdateForUnit('second', new Date(0), {\r\n\t\t\t// future: false,\r\n\t\t\tnow: 0\r\n\t\t}).should.equal(500)\r\n\t})\r\n\r\n\tit('should get time to next update for unit (future)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', seconds * 1000, {\r\n\t\t\t\t// future: true,\r\n\t\t\t\tnow: 0\r\n\t\t\t}).should.equal(expected * 1000 + (addOneMs ? 1 : 0))\r\n\t\t}\r\n\r\n\t\ttest(9, 0.5)\r\n\t\ttest(9.1, 0.6)\r\n\t\ttest(9.4, 0.9)\r\n\t\ttest(9.5, 0)\r\n\t\ttest(9.9, 0.4)\r\n\t\ttest(10, 0.5)\r\n\r\n\t\ttest(1.1, 0.6)\r\n\t\ttest(1, 0.5)\r\n\t\ttest(0.9, 0.4)\r\n\t\ttest(0.5, 0)\r\n\t\ttest(0.4, 0.4)\r\n\t\ttest(0, 0.5, false)\r\n\t})\r\n\r\n\tit('should get time to next update for unit (past)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', -1 * seconds * 1000, {\r\n\t\t\t\t// future: false,\r\n\t\t\t\tnow: 0\r\n\t\t\t}).should.equal(expected * 1000)\r\n\t\t}\r\n\r\n\t\ttest(10, 0.5)\r\n\t\ttest(9.9, 0.6)\r\n\t\ttest(9.5, 1)\r\n\t\ttest(9.4, 0.1)\r\n\t\ttest(9.1, 0.4)\r\n\t\ttest(9, 0.5)\r\n\r\n\t\ttest(0, 0.5, false)\r\n\t\ttest(0.5, 1, false)\r\n\t\ttest(0.9, 0.6, false)\r\n\t\ttest(1, 0.5, false)\r\n\t\ttest(1.1, 0.4, false)\r\n\t})\r\n\r\n\tit('should support \"floor\" rounding (future)', () => {\r\n\t\tconst test = (seconds, expected, addOneMs = true) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', seconds * 1000, {\r\n\t\t\t\t// future: true,\r\n\t\t\t\tnow: 0,\r\n\t\t\t\tround: 'floor'\r\n\t\t\t}).should.equal(expected * 1000 + (addOneMs ? 1 : 0))\r\n\t\t}\r\n\r\n\t\ttest(9, 0)\r\n\t\ttest(9.1, 0.1)\r\n\t\ttest(9.4, 0.4)\r\n\t\ttest(9.5, 0.5)\r\n\t\ttest(9.9, 0.9)\r\n\t\ttest(10, 0)\r\n\r\n\t\ttest(1.1, 0.1)\r\n\t\ttest(1, 0)\r\n\t\ttest(0.9, 0.9)\r\n\t\ttest(0.5, 0.5)\r\n\t\ttest(0.1, 0.1)\r\n\t\ttest(0, 1, false)\r\n\t})\r\n\r\n\tit('should support \"floor\" rounding (past)', () => {\r\n\t\tconst test = (seconds, expected) => {\r\n\t\t\tgetTimeToNextUpdateForUnit('second', -1 * seconds * 1000, {\r\n\t\t\t\t// future: false,\r\n\t\t\t\tnow: 0,\r\n\t\t\t\tround: 'floor'\r\n\t\t\t}).should.equal(expected * 1000)\r\n\t\t}\r\n\r\n\t\ttest(10, 1)\r\n\t\ttest(9.9, 0.1)\r\n\t\ttest(9.5, 0.5)\r\n\t\ttest(9.4, 0.6)\r\n\t\ttest(9.1, 0.9)\r\n\t\ttest(9, 1)\r\n\r\n\t\ttest(0, 1)\r\n\t\ttest(0.5, 0.5)\r\n\t\ttest(0.9, 0.1)\r\n\t\ttest(1, 1)\r\n\t\ttest(1.1, 0.9)\r\n\t})\r\n})"],"mappings":"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"}