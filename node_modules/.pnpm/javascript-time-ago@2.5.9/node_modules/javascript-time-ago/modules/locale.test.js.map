{"version":3,"file":"locale.test.js","names":["chooseLocale","intlDateTimeFormatSupportedLocale","describe","it","should","equal","arrayToObject","array","reduce","object","locale","choose","locales","defaultLocale","concat","_","includes","expect","to"],"sources":["../source/locale.test.js"],"sourcesContent":["import chooseLocale, { intlDateTimeFormatSupportedLocale } from './locale.js'\r\n\r\ndescribe('locale', () => {\r\n\tit(`should tell if can use Intl for date formatting`, () => {\r\n\t\tintlDateTimeFormatSupportedLocale('en').should.equal('en')\r\n\t\tintlDateTimeFormatSupportedLocale('en-XX').should.equal('en-XX')\r\n\t\tintlDateTimeFormatSupportedLocale(['en', 'ru']).should.equal('en')\r\n\t})\r\n\r\n\tit(`should choose the most appropriate locale`, () => {\r\n\t\tfunction arrayToObject(array) {\r\n\t\t\treturn array.reduce((object, locale) => {\r\n\t\t\t\tobject[locale] = true\r\n\t\t\t\treturn object\r\n\t\t\t}, {})\r\n\t\t}\r\n\r\n\t\tfunction choose(locale, locales, defaultLocale = 'en') {\r\n\t\t\tif (typeof locale === 'string') {\r\n\t\t\t\tlocale = [locale]\r\n\t\t\t}\r\n\t\t\tlocale = locale.concat(defaultLocale)\r\n\t\t\treturn chooseLocale(locale, _ => locales.includes(_))\r\n\t\t}\r\n\r\n\t\tchoose('ru-RU', ['en', 'ru']).should.equal('ru')\r\n\t\tchoose('en-GB', ['en', 'ru']).should.equal('en')\r\n\t\tchoose('fr-FR', ['en', 'ru']).should.equal('en')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'ru']).should.equal('en')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'de']).should.equal('de')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'de', 'fr']).should.equal('fr')\r\n\t\tchoose('fr-FR', ['en', 'fr-FR']).should.equal('fr-FR')\r\n\r\n\t\texpect(() => choose('fr-FR', ['de', 'ru'])).to.throw(\r\n\t\t\t'No locale data has been registered for any of the locales: fr-FR'\r\n\t\t)\r\n\t})\r\n})"],"mappings":"AAAA,OAAOA,YAAP,IAAuBC,iCAAvB,QAAgE,aAAhE;AAEAC,QAAQ,CAAC,QAAD,EAAW,YAAM;EACxBC,EAAE,oDAAoD,YAAM;IAC3DF,iCAAiC,CAAC,IAAD,CAAjC,CAAwCG,MAAxC,CAA+CC,KAA/C,CAAqD,IAArD;IACAJ,iCAAiC,CAAC,OAAD,CAAjC,CAA2CG,MAA3C,CAAkDC,KAAlD,CAAwD,OAAxD;IACAJ,iCAAiC,CAAC,CAAC,IAAD,EAAO,IAAP,CAAD,CAAjC,CAAgDG,MAAhD,CAAuDC,KAAvD,CAA6D,IAA7D;EACA,CAJC,CAAF;EAMAF,EAAE,8CAA8C,YAAM;IACrD,SAASG,aAAT,CAAuBC,KAAvB,EAA8B;MAC7B,OAAOA,KAAK,CAACC,MAAN,CAAa,UAACC,MAAD,EAASC,MAAT,EAAoB;QACvCD,MAAM,CAACC,MAAD,CAAN,GAAiB,IAAjB;QACA,OAAOD,MAAP;MACA,CAHM,EAGJ,EAHI,CAAP;IAIA;;IAED,SAASE,MAAT,CAAgBD,MAAhB,EAAwBE,OAAxB,EAAuD;MAAA,IAAtBC,aAAsB,uEAAN,IAAM;;MACtD,IAAI,OAAOH,MAAP,KAAkB,QAAtB,EAAgC;QAC/BA,MAAM,GAAG,CAACA,MAAD,CAAT;MACA;;MACDA,MAAM,GAAGA,MAAM,CAACI,MAAP,CAAcD,aAAd,CAAT;MACA,OAAOb,YAAY,CAACU,MAAD,EAAS,UAAAK,CAAC;QAAA,OAAIH,OAAO,CAACI,QAAR,CAAiBD,CAAjB,CAAJ;MAAA,CAAV,CAAnB;IACA;;IAEDJ,MAAM,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,IAAP,CAAV,CAAN,CAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;IACAM,MAAM,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,IAAP,CAAV,CAAN,CAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;IACAM,MAAM,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,IAAP,CAAV,CAAN,CAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;IACAM,MAAM,CAAC,CAAC,OAAD,EAAU,OAAV,CAAD,EAAqB,CAAC,IAAD,EAAO,IAAP,CAArB,CAAN,CAAyCP,MAAzC,CAAgDC,KAAhD,CAAsD,IAAtD;IACAM,MAAM,CAAC,CAAC,OAAD,EAAU,OAAV,CAAD,EAAqB,CAAC,IAAD,EAAO,IAAP,CAArB,CAAN,CAAyCP,MAAzC,CAAgDC,KAAhD,CAAsD,IAAtD;IACAM,MAAM,CAAC,CAAC,OAAD,EAAU,OAAV,CAAD,EAAqB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAArB,CAAN,CAA+CP,MAA/C,CAAsDC,KAAtD,CAA4D,IAA5D;IACAM,MAAM,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,OAAP,CAAV,CAAN,CAAiCP,MAAjC,CAAwCC,KAAxC,CAA8C,OAA9C;IAEAY,MAAM,CAAC;MAAA,OAAMN,MAAM,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,IAAP,CAAV,CAAZ;IAAA,CAAD,CAAN,CAA4CO,EAA5C,UACC,kEADD;EAGA,CA3BC,CAAF;AA4BA,CAnCO,CAAR"}